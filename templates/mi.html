<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CINESMART</title>
    <link rel="stylesheet" href="../static/mistyles.css">

    <style>
        /* Add some basic card styling */
        .movie-card {
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 16px;
            margin: 10px;
            width: 200px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            margin-top: 100px;
        }

        .movie-card:hover {
            transform: scale(1.05);
        }

        .movie-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        #movies {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        /* ✅ Dialogflow Chatbot Position Fix */
        df-messenger {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
        }
    </style>
</head>

<body>

<header>
    <div class="header-container">
        <div class="logo-section">
            <h1 id="cinesmart-logo">CINESMART</h1>
        </div>

        <div class="sidebar-section">
            <aside id="sidebar">
                <div id="sidebar-content">

                    <div class="logo">
                        <h2>CINESMART</h2>
                    </div>

                    <hr class="MuiDivider-root MuiDivider-fullWidth css-1px5dlw">

                    <div class="categories">
                        <h3>Categories</h3>
                        <ul>
                            <li><a href="{{ url_for('popular') }}"><img src="../static/popular.jpg"> Popular</a></li>
                            <li><a href="{{ url_for('top_rated') }}"><img src="../static/top rated.jpg"> Top Rated</a></li>
                            <li><a href="{{ url_for('upcoming') }}"><img src="../static/upcoming.jpg"> Upcoming</a></li>
                        </ul>
                    </div>

                    <div class="genres">
                        <h3>Genres</h3>
                        <ul>
                            <li><a href="{{ url_for('action') }}"><img src="../static/action.jpg"> Action</a></li>
                            <li><a href="{{ url_for('adventure') }}"><img src="../static/adventure.jpg"> Adventure</a></li>
                            <li><a href="{{ url_for('animation') }}"><img src="../static/animation.jpg"> Animation</a></li>
                            <li><a href="{{ url_for('comedy') }}"><img src="../static/comedy.jpg"> Comedy</a></li>
                            <li><a href="{{ url_for('drama') }}"><img src="../static/drama.jpg"> Drama</a></li>
                            <li><a href="{{ url_for('fantasy') }}"><img src="../static/fantasy.jpg"> Fantasy</a></li>
                            <li><a href="{{ url_for('horror') }}"><img src="../static/horror.jpg"> Horror</a></li>
                            <li><a href="{{ url_for('mystery') }}"><img src="../static/mystery.jpg"> Mystery</a></li>
                            <li><a href="{{ url_for('romance') }}"><img src="../static/romance.jpg"> Romance</a></li>
                            <li><a href="{{ url_for('scifi') }}"><img src="../static/sci-fi.jpg"> Sci-Fi</a></li>
                        </ul>
                    </div>

                </div>
            </aside>
        </div>
    </div>
</header>


<!-- Auth Buttons -->
<div id="auth-buttons">
    <button id="signup-button">Signup</button>
    <button id="login-button">Login</button>
</div>


<!-- Signup Modal -->
<div id="signup-modal" class="modal">
    <div class="modal-content">
        <span class="close" id="close-signup">&times;</span>

        <div class="form-container">
            <h1>Signup</h1>
            <form action="/signup" method="post">
                <input type="text" name="username" placeholder="Username" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <button type="submit">Signup</button>
            </form>
        </div>

        <p style="text-align:center; margin-top:20px;">
            Already have an account?
            <a href="#" id="go-to-login" style="color:white; font-weight:bold;">Login here</a>
        </p>
    </div>
</div>


<!-- Login Modal -->
<div id="login-modal" class="modal">
    <div class="modal-content">
        <span class="close" id="close-login">&times;</span>

        <div class="form-container">
            <h1>Login</h1>
            <form action="/login" method="post">
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>

            <p style="text-align:center; margin-top:20px;">
                Don't have an account?
                <a href="#" id="go-to-signup">Signup here</a>
            </p>
        </div>
    </div>
</div>


<!-- Main Content -->
<main>
    <section id="search">
        <input type="text" id="search-bar" placeholder="Search for movies...">
    </section>

    <section id="movie-list">
        <div id="movies"></div>
    </section>
</main>


<!-- ✅ Dialogflow Messenger Chatbot (FIXED) -->
<script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>

<df-messenger
  intent="WELCOME"
  chat-title="CineBot"
  agent-id="6e8067d1-9c19-42eb-8f77-80babcc63bde"
  language-code="en">
</df-messenger>


<!-- Scripts -->
<script src="../static/js/script_search.js"></script>

<script>
    // Modal handling for signup and login
    const signupModal = document.getElementById('signup-modal');
    const loginModal = document.getElementById('login-modal');

    const signupBtn = document.getElementById('signup-button');
    const loginBtn = document.getElementById('login-button');

    const closeSignup = document.getElementById('close-signup');
    const closeLogin = document.getElementById('close-login');

    const goToSignup = document.getElementById('go-to-signup');
    const goToLogin = document.getElementById('go-to-login');

    signupBtn.onclick = function () {
        signupModal.style.display = 'block';
    };

    loginBtn.onclick = function () {
        loginModal.style.display = 'block';
    };

    closeSignup.onclick = function () {
        signupModal.style.display = 'none';
    };

    closeLogin.onclick = function () {
        loginModal.style.display = 'none';
    };

    goToSignup.onclick = function () {
        loginModal.style.display = 'none';
        signupModal.style.display = 'block';
    };

    goToLogin.onclick = function () {
        signupModal.style.display = 'none';
        loginModal.style.display = 'block';
    };

    window.onclick = function (event) {
        if (event.target == signupModal) signupModal.style.display = 'none';
        if (event.target == loginModal) loginModal.style.display = 'none';
    };
</script>

</body>
</html>
